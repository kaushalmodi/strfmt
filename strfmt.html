<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--  This file is generated by Nimrod. -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Module strfmt</title>
<style type="text/css">

span.DecNumber {color: blue}
span.BinNumber {color: blue}
span.HexNumber {color: blue}
span.OctNumber {color: blue}
span.FloatNumber {color: blue}
span.Identifier  {color: black}
span.Keyword {font-weight: bold}
span.StringLit {color: blue}
span.LongStringLit {color: blue}
span.CharLit {color: blue}
span.EscapeSequence {color: black}
span.Operator {color: black}
span.Punctuation {color: black}
span.Comment, span.LongComment {font-style:italic; color: green}
span.RegularExpression  {color: DarkViolet}
span.TagStart {color: DarkViolet}
span.TagEnd {color: DarkViolet}
span.Key  {color: blue}
span.Value  {color: black}
span.RawData {color: blue}
span.Assembler  {color: blue}
span.Preprocessor {color: DarkViolet}
span.Directive  {color: DarkViolet}
span.Command, span.Rule, span.Hyperlink, span.Label, span.Reference, 
span.Other  {color: black}

div.navigation {
  -moz-border-radius: 5px 5px 5px 5px;
  float: left; 
  width: 30%;
  margin: 0; padding: 0;
  border: 3px outset #7F7F7F;
  background-color: #7F7F7F;
}

div.navigation ul {
  list-style-type: none;
  padding-left: 1em;
}
div.navigation ul li a, div.navigation ul li a:visited {
  font-weight: bold;
  color: #FFFFFF;
  text-decoration: none;
}
div.navigation ul li a:hover {
  font-weight: bold;
  text-decoration: none;
  color: gold;
}

div.content {
  margin-left: 30%;
  padding: 0 1em;
  border-left: 4em;
}

dl.item dd, dl.item dd p {
  margin-top:3px;
}
dl.item dd pre {
  margin-left: 15pt;
  border: 0px;
}
dl.item dt, dl.item dt pre {
  margin:  20pt 0 0 5pt;
}

pre, span.tok {
  background-color: #F9F9F9;
  border-color: #C4C4C4;
  border-style: solid;
  border-width: 1px 1px 1px 2px;
  color: black;
  line-spacing: 110%;
  padding: 2px;
}

span.red {
  color: #A80000;
}

hr {background-color:#9D9D9D; border:0 none; color:#9D9D9D; height:1px; width:100%;}

/*
:Author: David Goodger
:Contact: goodger@python.org
:Date: Date: 2006-05-21 22:44:42 +0200 (Sun, 21 May 2006)
:Revision: Revision: 4564
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/
/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th { border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first { margin-top: 0 ! important }
.last, .with-subtitle { margin-bottom: 0 ! important }
.hidden { display: none }
a.toc-backref { text-decoration: none ; color: black }
blockquote.epigraph { margin: 2em 5em ; }
dl.docutils dd { margin-bottom: 0.5em }
div.abstract { margin: 2em 5em }
div.abstract p.topic-title { font-weight: bold ; text-align: center }
div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ; border: medium outset ; padding: 1em }
div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title { font-weight: bold ; font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title { color: red ; font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication { margin: 2em 5em ; text-align: center ; font-style: italic }
div.dedication p.topic-title { font-weight: bold ; font-style: normal }
div.figure { margin-left: 2em ; margin-right: 2em }
div.footer, div.header { clear: both; font-size: smaller }
div.line-block { display: block ; margin-top: 1em ; margin-bottom: 1em }
div.line-block div.line-block { margin-top: 0 ; margin-bottom: 0 ;
  margin-left: 1.5em }
div.sidebar { margin-left: 1em ; border: medium outset ;
  padding: 1em ; background-color: #ffffee ; /*width: 40% ;*/ float: right ;
  clear: right }

div.sidebar p.rubric { font-family: sans-serif ; font-size: medium }
div.system-messages { margin: 5em }
div.system-messages h1 { color: red }
div.system-message { border: medium outset ; padding: 1em }
div.system-message p.system-message-title { color: red ; font-weight: bold }
div.topic { margin: 2em;}
h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }
h1.title { text-align: center }
h2.subtitle { text-align: center }
/* hr.docutils { width: 75% } */
img.align-left { clear: left }
img.align-right { clear: right }
ol.simple, ul.simple { margin-bottom: 1em }
ol.arabic { list-style: decimal }
ol.loweralpha { list-style: lower-alpha }
ol.upperalpha { list-style: upper-alpha }
ol.lowerroman { list-style: lower-roman }
ol.upperroman { list-style: upper-roman }
p.attribution { text-align: right ; margin-left: 50% }
p.caption { font-style: italic }
p.credits { font-style: italic ; font-size: smaller }
p.label { white-space: nowrap }
p.rubric { font-weight:bold;font-size:larger;color:maroon;text-align:center}
p.sidebar-title {font-family: sans-serif ;font-weight: bold ;font-size: larger }
p.sidebar-subtitle {font-family: sans-serif ; font-weight: bold }
p.topic-title {
font-weight: bold;
background-color: #6D6D6D;
border-bottom: 1px solid #000000;
border-top: 1px solid black;
color: white;
text-align: center;
margin: 0;
}
pre.address { margin-bottom: 0;margin-top:0;font-family:serif;font-size:100% }
pre.literal-block, pre.doctest-block {margin-left: 2em ;margin-right: 2em }
span.classifier {font-family: sans-serif;font-style: oblique }
span.classifier-delimiter {font-family: sans-serif;font-weight: bold }
span.interpreted {font-family: sans-serif }
span.option {white-space: nowrap }
span.pre {white-space: pre }
span.problematic {color: red }
span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation { border-left: solid 1px gray; margin-left: 1px }
table.docinfo {margin: 2em 4em }
table.docutils {margin-top: 0.5em;margin-bottom: 0.5em; border: 0 solid #9d9d9d; border-collapse: collapse; }
table.footnote {border-left: solid 1px black;margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {padding-left: 0.5em;padding-right: 0.5em;
  vertical-align: top;}

table.docutils td, table.docutils th { border-bottom:1px solid #9D9D9D; }
/* color: #4d4d4d} */

/* table.docutils td:hover, table.docinfo td:hover {color: #000000} */
  

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold;text-align: left;white-space: nowrap;padding-left: 0 }
  
table.docutils th
{
color: black;
font-weight:normal;
background-color: #E3E3E3;
border-top: 1px solid #1d1d1d;
border-bottom: 1px solid #1d1d1d;
}
  
h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {font-size: 100% }
ul.auto-toc { list-style-type: none }
/*a.reference { color: #E00000; font-weight:bold;}
a.reference:hover {color: #E00000;background-color: #ffff00;display: margin;
  font-weight:bold;}*/

</style>

</head>
<body>
<div class="document" id="documentId">
<h1 class="title">Module strfmt</h1>
<div class="navigation" id="navigation">
<ul class="simple">
<li><a class="reference" id="introduction_toc" href="#introduction">Introduction</a></li>
<li><a class="reference" id="formatting-a-single-value-format_toc" href="#formatting-a-single-value-format">Formatting a single value: <cite>format</cite></a></li>
<li><a class="reference" id="array-formatting_toc" href="#array-formatting">Array formatting</a></li>
<li><a class="reference" id="a-string-containing-formatted-values-fmt_toc" href="#a-string-containing-formatted-values-fmt">A string containing formatted values: <cite>fmt</cite></a></li>
<li><a class="reference" id="nested-format-strings_toc" href="#nested-format-strings">Nested format strings</a></li>
<li><a class="reference" id="how-fmt-works_toc" href="#how-fmt-works">How <cite>fmt</cite> works</a></li>
<li><a class="reference" id="writing-formatted-output-to-a-file-writefmt_toc" href="#writing-formatted-output-to-a-file-writefmt">Writing formatted output to a file: <cite>writefmt</cite></a></li>
<li><a class="reference" id="adding-new-formatting-functions_toc" href="#adding-new-formatting-functions">Adding new formatting functions</a></li>
<li>
  <a class="reference" href="#6" id="56">Imports</a>
  <ul class="simple">
    
  </ul>
</li>
<li>
  <a class="reference" href="#7" id="57">Types</a>
  <ul class="simple">
      <li><a class="reference" href="#EFormat"
    title="EFormat* = object of EBase"><wbr />EFormat</a></li>
  <li><a class="reference" href="#Writer"
    title="Writer* = generic W
    block: 
        var x: W
        write(x, char)"><wbr />Writer</a></li>
  <li><a class="reference" href="#TFmtAlign"
    title="TFmtAlign* = enum 
  faDefault,                  ## default for given format type
  faLeft,                     ## left aligned
  faRight,                    ## right aligned
  faCenter,                   ## centered
  faPadding                   ## right aligned, fill characters after sign (numbers only)"><wbr />TFmt<wbr />Align</a></li>
  <li><a class="reference" href="#TFmtSign"
    title="TFmtSign* = enum 
  fsMinus,                    ## only unary minus, no reservered sign space for positive numbers
  fsPlus,                     ## unary minus and unary plus
  fsSpace                     ## unary minus and reserved space for positive numbers"><wbr />TFmt<wbr />Sign</a></li>
  <li><a class="reference" href="#TFmtType"
    title="TFmtType* = enum 
  ftDefault,                  ## default format for given parameter type
  ftStr,                      ## string
  ftChar,                     ## character
  ftDec,                      ## decimal integer
  ftBin,                      ## binary integer
  ftOct,                      ## octal integer
  ftHex,                      ## hexadecimal integer
  ftFix,                      ## real number in fixed point notation
  ftSci,                      ## real number in scientific notation
  ftGen,                      ## real number in generic form (either fixed point or scientific)
  ftPercent                   ## real number multiplied by 100 and % added"><wbr />TFmt<wbr />Type</a></li>
  <li><a class="reference" href="#TFormat"
    title="TFormat* = tuple[typ: TFmtType, ## format type
                 precision: int, ## floating point precision
                 width: int,  ## minimal width
                 fill: string, ## the fill character, UTF8
                 align: TFmtAlign, ## aligment
                 sign: TFmtSign, ## sign notation
                 baseprefix: bool, ## whether binary, octal, hex should be prefixed by 0b, 0x, 0o
                 upcase: bool, ## upper case letters in hex or exponential formats
                 comma: bool, ##
                 arysep: string]"><wbr />TFormat</a></li>

  </ul>
</li>
<li>
  <a class="reference" href="#10" id="60">Consts</a>
  <ul class="simple">
      <li><a class="reference" href="#DefaultFmt"
    title="DefaultFmt*: TFormat = (ftDefault, - 1, - 1, nil, faDefault, fsMinus, false, 
                        false, false, nil)"><wbr />Default<wbr />Fmt</a></li>

  </ul>
</li>
<li>
  <a class="reference" href="#12" id="62">Procs</a>
  <ul class="simple">
      <li><a class="reference" href="#write,string,char"
    title="write*(s: var string; c: char)"><wbr />write</a></li>
  <li><a class="reference" href="#parse,string"
    title="parse*(fmt: string): TFormat"><wbr />parse</a></li>
  <li><a class="reference" href="#getalign,TFormat,TFmtAlign,int"
    title="getalign*(fmt: TFormat; defalign: TFmtAlign; slen: int): tuple[left, right: int]"><wbr />getalign</a></li>
  <li><a class="reference" href="#writeformat,Writer,string,TFormat"
    title="writeformat*(o: var Writer; s: string; fmt: TFormat)"><wbr />writeformat</a></li>
  <li><a class="reference" href="#writeformat,Writer,char,TFormat"
    title="writeformat*(o: var Writer; c: char; fmt: TFormat)"><wbr />writeformat</a></li>
  <li><a class="reference" href="#writeformat,Writer,TRune,TFormat"
    title="writeformat*(o: var Writer; c: TRune; fmt: TFormat)"><wbr />writeformat</a></li>
  <li><a class="reference" href="#writeformat,Writer,TInteger,TFormat"
    title="writeformat*(o: var Writer; i: TInteger; fmt: TFormat)"><wbr />writeformat</a></li>
  <li><a class="reference" href="#writeformat,Writer,pointer,TFormat"
    title="writeformat*(o: var Writer; p: pointer; fmt: TFormat)"><wbr />writeformat</a></li>
  <li><a class="reference" href="#writeformat,Writer,TReal,TFormat"
    title="writeformat*(o: var Writer; x: TReal; fmt: TFormat)"><wbr />writeformat</a></li>
  <li><a class="reference" href="#writeformat,Writer,openarray[any],TFormat"
    title="writeformat*(o: var Writer; ary: openarray[any]; fmt: TFormat)"><wbr />writeformat</a></li>
  <li><a class="reference" href="#addformat,Writer,,TFormat"
    title="addformat*(o: var Writer; x; fmt: TFormat = DefaultFmt)"><wbr />addformat</a></li>
  <li><a class="reference" href="#addformat,Writer,,string"
    title="addformat*(o: var Writer; x; fmt: string)"><wbr />addformat</a></li>
  <li><a class="reference" href="#addformat,string,string"
    title="addformat*(s: var string; x: string)"><wbr />addformat</a></li>
  <li><a class="reference" href="#addformat,TFile,string"
    title="addformat*(f: TFile; x: string)"><wbr />addformat</a></li>
  <li><a class="reference" href="#addformat,TFile,,TFormat"
    title="addformat*(f: TFile; x; fmt: TFormat = DefaultFmt)"><wbr />addformat</a></li>
  <li><a class="reference" href="#addformat,TFile,,string"
    title="addformat*(f: TFile; x; fmt: string)"><wbr />addformat</a></li>
  <li><a class="reference" href="#format,,TFormat"
    title="format*(x; fmt: TFormat): string"><wbr />format</a></li>
  <li><a class="reference" href="#format,,string"
    title="format*(x; fmt: string): string"><wbr />format</a></li>
  <li><a class="reference" href="#format,"
    title="format*(x): string"><wbr />format</a></li>

  </ul>
</li>
<li>
  <a class="reference" href="#17" id="67">Macros</a>
  <ul class="simple">
      <li><a class="reference" href="#fmt.m,,varargs[expr]"
    title="fmt*(fmtstr: string{lit}; args: varargs[expr]): expr"><wbr />fmt</a></li>
  <li><a class="reference" href="#writefmt.m,TFile,string,varargs[expr]"
    title="writefmt*(f: TFile; fmtstr: string; args: varargs[expr]): expr"><wbr />writefmt</a></li>
  <li><a class="reference" href="#writelnfmt.m,TFile,string,varargs[expr]"
    title="writelnfmt*(f: TFile; fmtstr: string; args: varargs[expr]): expr"><wbr />writelnfmt</a></li>
  <li><a class="reference" href="#printfmt.m,,varargs[expr]"
    title="printfmt*(fmtstr: string{lit}; args: varargs[expr]): expr"><wbr />printfmt</a></li>
  <li><a class="reference" href="#printlnfmt.m,,varargs[expr]"
    title="printlnfmt*(fmtstr: string{lit}; args: varargs[expr]): expr"><wbr />printlnfmt</a></li>

  </ul>
</li>

</ul>
</div>
<div class="content" id="content">
<table class="docinfo" frame="void" rules="none"><col class="docinfo-name" /><col class="docinfo-content" /><tbody valign="top"><tr><th class="docinfo-name">Author:</th><td> Frank Fischer</td></tr>
<tr><th class="docinfo-name">License:</th><td> MIT</td></tr>
<tr><th class="docinfo-name">Version:</th><td> 0.1.0</td></tr>
</tbody></table>
<h1><a class="toc-backref" id="introduction" href="#introduction_toc">Introduction</a></h1><p>This module implements some basic helpers for formatting values as strings in a configurable way. It is inspired by and similar to <a class="reference external" href="https://docs.python.org/3.4/library/functions.html#format">Python's format function</a></p>
<p>The most important functions and macros provided are:</p>
<ol class="simple"><li>the <cite>format</cite> functions to render a single value as a string,</li>
<li>the <cite>fmt</cite> macro to construct a string containing several formatted values</li>
<li>the <cite>writefmt</cite> and <cite>printfmt</cite> familiy of macros to write a formatted string to a file and <cite>stdout</cite>, respectively</li>
</ol>
<p>These functions are described in the following sections.</p>

<h1><a class="toc-backref" id="formatting-a-single-value-format" href="#formatting-a-single-value-format_toc">Formatting a single value: <cite>format</cite></a></h1><p>The <cite>format</cite> function transforms a single value to a string according to a given <em>format string</em>, e.g.</p>
<pre><span class="FloatNumber">42.23</span><span class="Operator">.</span><span class="Identifier">format</span><span class="Punctuation">(</span><span class="StringLit">&quot;06.1f&quot;</span><span class="Punctuation">)</span></pre><p>The syntax of the format specification string is similar to <a class="reference external" href="https://docs.python.org/3.4/library/string.html#formatspec">Python's Format Specification Mini-Language</a>.</p>
<p>The general form of a format specifier is</p>
<pre>format_spec ::= [[fill]align][sign][#][0][width][,][.precision][type][a[array_sep]]
fill        ::= rune
align       ::= &quot;&lt;&quot; | &quot;&gt;&quot; | &quot;^&quot; | &quot;=&quot;
sign        ::= &quot;+&quot; | &quot;-&quot; | &quot; &quot;
width       ::= integer
precision   ::= integer
type        ::= &quot;b&quot; | &quot;c&quot; | &quot;d&quot; | &quot;e&quot; | &quot;E&quot; | &quot;f&quot; | &quot;F&quot; | &quot;g&quot; | &quot;G&quot; | &quot;n&quot; | &quot;o&quot; | &quot;s&quot; | &quot;x&quot; | &quot;X&quot; | &quot;%&quot;
array_sep   ::= &quot;&quot; | (&lt;level separating character&gt; string )+</pre>
<p>The meaning of the various fields is as follows.</p>
<dl class="docutils"><dt><cite>fill</cite></dt>
<dd>this character (or rune) is used to for the additional characters to be written until the formatted string is at least <cite>width</cite> characters long. The fill character defaults to SPACE.</dd>
<dt><cite>align</cite></dt>
<dd><table border="1" class="docutils"><tr><th>Option</th><th>Meaning</th></tr>
<tr><td><tt class="docutils literal"><span class="pre">&lt;</span></tt></td><td>Left alignment, additional characters are added to the right (default for string).</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">&gt;</span></tt></td><td>Right alignment, additional characters are added to the left.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">^</span></tt></td><td>Centered , the same amount of characters is added to the left and the right.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">=</span></tt></td><td>Padding. If a numeric value is printed with a sign, then additional characters are added after the sign. Otherwise it behaves like &quot;<tt class="docutils literal"><span class="pre">&gt;</span></tt>&quot;. This option is only available for numbers (default for numbers).</td></tr>
</table></dd>
<dt><cite>sign</cite></dt>
<dd>The sign character is only used for numeric values.<table border="1" class="docutils"><tr><th>Option</th><th>Meaning</th></tr>
<tr><td><tt class="docutils literal"><span class="pre">+</span></tt></td><td>All numbers (including positive ones) are preceeded by a sign.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">-</span></tt></td><td>Only negative numbers are preceeded by a sign.</td></tr>
<tr><td><cite>SPACE</cite></td><td>Negative numbers are preceeded by a sign, positive numbers are preceeded by a space.</td></tr>
</table></dd>
<dt><cite>#</cite></dt>
<dd>If this character is present then the integer values in the formats <tt class="docutils literal"><span class="pre">b</span></tt>, <tt class="docutils literal"><span class="pre">o</span></tt>, <tt class="docutils literal"><span class="pre">x</span></tt> and <tt class="docutils literal"><span class="pre">X</span></tt> are preceded by <cite>0b</cite>, <cite>0o</cite> or <cite>0x</cite>, respectively. In all other formats this character is ignored.</dd>
<dt><cite>width</cite></dt>
<dd>The minimal with of the resulting string. The result string is padded with extra characters (according the <cite>align</cite> field) until at least <cite>width</cite> characters have been written.</dd>
<dt><cite>,</cite></dt>
<dd>Currently ignored.</dd>
<dt><cite>precision</cite></dt>
<dd>The meaning of the precision field depends on the formatting type.<table border="1" class="docutils"><tr><th>Type</th><th>Meaning</th></tr>
<tr><td><tt class="docutils literal"><span class="pre">s</span></tt></td><td>The maximal number of characters written.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">f</span></tt>, <tt class="docutils literal"><span class="pre">F</span></tt>, <tt class="docutils literal"><span class="pre">e</span></tt> and <tt class="docutils literal"><span class="pre">E</span></tt></td><td>The number of digits after the decimal point.</td></tr>
<tr><th><tt class="docutils literal"><span class="pre">g</span></tt>, <tt class="docutils literal"><span class="pre">G</span></tt></th><th>The number of significant digits written (i.e. the number of overall digits).</th></tr>
<tr><td>Note that in all cases the </td><td>decimal point is printed if and only</td></tr>
<tr><td>if there is at least one </td><td>digit following the point.</td></tr>
<tr><td></td><td></td></tr>
<tr><td>The <cite>precision</cite> field is </td><td>ignored in all other cases.</td></tr>
<tr><td></td><td></td></tr>
<tr><td><cite>type</cite></td><td></td></tr>
<tr><td>The formatting type. The </td><td>valid types depend on the type of the</td></tr>
<tr><td>value to be printed. For </td><td>strings the following types are valid.</td></tr>
<tr><th></th><th></th></tr>
<tr><th>Type</th><th>Meaning</th></tr>
<tr><td><tt class="docutils literal"><span class="pre">s</span></tt></td><td>A string. This is the default format for strings.</td></tr>
</table><p>The following types are valid for integers.</p>
<table border="1" class="docutils"><tr><th>Type</th><th>Meaning</th></tr>
<tr><td><tt class="docutils literal"><span class="pre">d</span></tt></td><td>A decimal integer number. This is the default for integers.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">b</span></tt></td><td>A binary integer (base 2).</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">o</span></tt></td><td>An octal integer (base 8).</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">x</span></tt></td><td>A hexadecimal integer (base 16), all letters are lower case.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">X</span></tt></td><td>A hexadecimal integer (base 16), all letters are upper case.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">n</span></tt></td><td>The same as <tt class="docutils literal"><span class="pre">d</span></tt>.</td></tr>
</table><p>The following types are valid for real numbers.</p>
<table border="1" class="docutils"><tr><th>Type</th><th>Meaning</th></tr>
<tr><td><tt class="docutils literal"><span class="pre">f</span></tt></td><td>Fixed point format.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">F</span></tt></td><td>The same as f.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">e</span></tt></td><td>Scientific format, exactly one digit before the decimal point. The exponent is written with a lower case 'e'. The exponent always has a sign as at least two digits.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">E</span></tt></td><td>The same as <tt class="docutils literal"><span class="pre">e</span></tt> but with an upper case 'E'.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">g</span></tt></td><td><p>General format. The number is written either in fixed point format or in scientific format depending on the precision and the exponent in scientific format.</p>
<p>The exact rule is as follows. Suppose <cite>exp</cite> is the exponent in scientific format and <cite>p</cite> the desired precision. If <cite>-4 &lt;= exp &lt;= p-1</cite> then the number is formatted in fixed point format <tt class="docutils literal"><span class="pre">f</span></tt> with precision <cite>p-1-exp</cite>. Otherwise the number if formatted in scientific format <tt class="docutils literal"><span class="pre">e</span></tt> with precision <cite>p-1</cite>. Trailing zeros are removed in all cases and the decimal point is removed as well if there are no remaing digits following it.</p>
</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">G</span></tt></td><td>The same as <tt class="docutils literal"><span class="pre">g</span></tt> but works like <tt class="docutils literal"><span class="pre">E</span></tt> if scientific format is used.</td></tr>
<tr><td><tt class="docutils literal"><span class="pre">%</span></tt></td><td>The number if multiplied by 100, formatted in fixed point format <tt class="docutils literal"><span class="pre">f</span></tt> and followed by a percent sign.</td></tr>
</table></dd>
<dt><cite>array_sep</cite> If an array is formatted, the format specifications</dt>
<dd><p>above apply to each element of the array. The elements are printed in succession separated by a separator string. If the array is nested then this applies recursively.</p>
<p>The <cite>array_sep</cite> field specifies the separator string for all levels of a nested array. The first character after the <cite>a</cite> is the level separator and works as separator between the string for successive levels. It is never used in the resulting string. All characters between two level separators are the separator between two elements of the respective array level. See <a class="reference external" href="#array-formatting">Array formatting</a> below.</p>
</dd>
</dl>

<h1><a class="toc-backref" id="array-formatting" href="#array-formatting_toc">Array formatting</a></h1><p>A format string may contain a separator string for formatting arrays. Because arrays might be nested the separator field contains the separator strings to be used between two successive elements of each level. The strings for each level are separated (in the format string itself) by a special separating character. This character is the first character after the <tt class="docutils literal"><span class="pre">a</span></tt> in the format string. The following example should make this clear:</p>
<pre><span class="Punctuation">[</span><span class="Punctuation">[</span><span class="DecNumber">2</span><span class="Punctuation">,</span> <span class="DecNumber">3</span><span class="Punctuation">,</span> <span class="DecNumber">4</span><span class="Punctuation">]</span><span class="Punctuation">,</span> <span class="Punctuation">[</span><span class="DecNumber">5</span><span class="Punctuation">,</span> <span class="DecNumber">6</span><span class="Punctuation">,</span> <span class="DecNumber">7</span><span class="Punctuation">]</span><span class="Punctuation">]</span><span class="Operator">.</span><span class="Identifier">format</span><span class="Punctuation">(</span><span class="StringLit">&quot;02da|; |, &quot;</span><span class="Punctuation">)</span></pre><p>This code returns the string <cite>&quot;02, 03, 04; 05, 06, 07&quot;</cite>. The special character separating the strings of different levels is the first character after the <tt class="docutils literal"><span class="pre">a</span></tt>, i.e. the pipe character <tt class="docutils literal"><span class="pre">|</span></tt> in this example. Following the first pipe character is the separator string for the outer most level, <cite>&quot;; &quot;</cite>. This means that after printing the first element of the outermost array the string <cite>&quot;; &quot;</cite> is printed. After the second pipe character comes the separator string for the second level, in this example <cite>&quot;, &quot;</cite>. Between each two elements of the second level the separator string <cite>&quot;, &quot;</cite> is printed. Because the elements of the second level array are integers, the format string &quot;02d&quot; applies to all of them. Thus, each number is printed with a leading 0. Each two numbers of the same inner array are separated by a command and a space. After the 4 has been printed the complete first element of the outer array (namely in array <cite>[2, 3, 4]</cite>) has been printed, so the separator string of the outer level follows, in this case a semicolon and a space. Finally the second array <cite>[6, 7, 8]</cite> is printed with the separator &quot;, &quot; between each two elements.</p>

<h1><a class="toc-backref" id="a-string-containing-formatted-values-fmt" href="#a-string-containing-formatted-values-fmt_toc">A string containing formatted values: <cite>fmt</cite></a></h1><p>The <cite>fmt</cite> macro allows to interpolate a string with several formatted values. This macro takes a format string as its first argument and the values to be formatted in the remaining arguments. The result is a formatted string expression. Note that the format string <em>must</em> be a literal string.</p>
<p>A format string contains a replacement field within curly braces <cite>{...}</cite>. Anything that is not contained in braces is considered literal text. Literal braces can be escaped by doubling the brace character <cite>{{</cite> and <cite>}}</cite>, respectively.</p>
<p>A format string has the following form:</p>
<pre>replacement_spec ::= &quot;{&quot; [&lt;argument&gt;] [&quot;.&quot; &lt;field&gt;] [&quot;[&quot; &lt;index&gt; &quot;]&quot;] [&quot;:&quot; format_spec] &quot;}&quot;</pre>
<p>The single fields have the following meaning.</p>
<dl class="docutils"><dt><cite>argument</cite></dt>
<dd>A number denoting the argument passed to <cite>fmt</cite>. The first argument (after the format string) has number 0. This number can be used to refer to a specific argument. The same argument can be refered by multiple replacement fields:<pre><span class="StringLit">&quot;{0} {1} {0}&quot;</span><span class="Operator">.</span><span class="Identifier">fmt</span><span class="Punctuation">(</span><span class="DecNumber">1</span><span class="Punctuation">,</span> <span class="DecNumber">0</span><span class="Punctuation">)</span></pre><p>gives the string <cite>&quot;1 0 1&quot;</cite>.</p>
<p>If no argument number is given, the replacement fields refer to the arguments passed to <cite>fmt</cite> in order. Note that this is an allways-or-never option: either <em>all</em> replacement fields use explicit argument numbers or none.</p>
</dd>
<dt><cite>field</cite></dt>
<dd>If the argument is a structered type (e.g. a tuple), this specifies which field of the argument should be formatted, e.g.<pre><span class="StringLit">&quot;{0.x} {0.y}&quot;</span><span class="Operator">.</span><span class="Identifier">fmt</span><span class="Punctuation">(</span><span class="Punctuation">(</span><span class="Identifier">x</span><span class="Punctuation">:</span> <span class="DecNumber">1</span><span class="Punctuation">,</span> <span class="Identifier">y</span><span class="Punctuation">:</span><span class="StringLit">&quot;foo&quot;</span><span class="Punctuation">)</span><span class="Punctuation">)</span></pre><p>gives <cite>&quot;1 foo&quot;</cite>.</p>
</dd>
<dt><cite>index</cite></dt>
<dd>If the argument is a sequence type the index refers to the elements of the sequence to be printed:<pre><span class="StringLit">&quot;&lt;{[1]}&gt;&quot;</span><span class="Operator">.</span><span class="Identifier">fmt</span><span class="Punctuation">(</span><span class="Punctuation">[</span><span class="DecNumber">23</span><span class="Punctuation">,</span> <span class="DecNumber">42</span><span class="Punctuation">,</span> <span class="DecNumber">81</span><span class="Punctuation">]</span><span class="Punctuation">)</span></pre><p>gives <cite>&quot;&lt;42&gt;&quot;</cite>.</p>
</dd>
<dt><cite>format_spec</cite></dt>
<dd>This is the format specification for the argument as described in <a class="reference external" href="#formatting-a-single-value-format">Formatting a single value: format</a>.</dd>
</dl>

<h1><a class="toc-backref" id="nested-format-strings" href="#nested-format-strings_toc">Nested format strings</a></h1><p>Format strings must be literal strings. Although this might be a restriction (format strings cannot be constructed during runtime), nested format strings give back a certain flexibility.</p>
<p>A nested format string is a format string in which the <em>format specifier</em> part of a replacement field contains further replacement fields, e.g.</p>
<blockquote><p><pre><span class="StringLit">&quot;{d:{}{}{}}&quot;</span><span class="Operator">.</span><span class="Identifier">fmd</span><span class="Punctuation">(</span><span class="DecNumber">42</span><span class="Punctuation">,</span> <span class="StringLit">&quot;.&quot;</span><span class="Punctuation">,</span> <span class="StringLit">&quot;^&quot;</span><span class="Punctuation">,</span> <span class="DecNumber">6</span><span class="Punctuation">)</span></pre></p></blockquote>
<p>Results in the string <cite>&quot;..42..&quot;</cite>.</p>
<p><cite>fmt</cite> allows exactly one nested level. Note that the resulting code is slightly more inefficient than without nesting (but only for those arguments that actually use nested fields), because after construction the outer format specification, the format string must be parsed again. Furthermore, the constructed format string requires an additional temporary string.</p>
<p>The following example demonstrates how <cite>fmt</cite> together with array separators can be used to format a nested in array in a Matlab-like style:</p>
<blockquote><p><pre><span class="StringLit">&quot;A=[{:6ga|;</span><span class="EscapeSequence">\n</span><span class="StringLit">   |, }]&quot;</span><span class="Operator">.</span><span class="Identifier">fmt</span><span class="Punctuation">(</span><span class="Punctuation">[</span><span class="Punctuation">[</span><span class="FloatNumber">1.0</span><span class="Punctuation">,</span><span class="FloatNumber">2.0</span><span class="Punctuation">,</span><span class="FloatNumber">3.0</span><span class="Punctuation">]</span><span class="Punctuation">,</span> <span class="Punctuation">[</span><span class="FloatNumber">4.0</span><span class="Punctuation">,</span><span class="FloatNumber">5.0</span><span class="Punctuation">,</span><span class="FloatNumber">6.0</span><span class="Punctuation">]</span><span class="Punctuation">]</span><span class="Punctuation">)</span></pre></p></blockquote>
<p>results in</p>
<blockquote><p><pre>A=[     1,      2,      3;
        4,      5,      6]</pre>
</p></blockquote>

<h1><a class="toc-backref" id="how-fmt-works" href="#how-fmt-works_toc">How <cite>fmt</cite> works</a></h1><p>The <cite>fmt</cite> macros transforms the format string and its arguments into a sequence of commands that build the resulting string. The format specifications are parsed and transformed into a <cite>TFormat</cite> structure at compile time so that no overhead remains at runtime. For instances, the following expression</p>
<blockquote><p><pre><span class="StringLit">&quot;This {} the number {:_^3} example&quot;</span><span class="Operator">.</span><span class="Identifier">fmt</span><span class="Punctuation">(</span><span class="StringLit">&quot;is&quot;</span><span class="Punctuation">,</span> <span class="DecNumber">1</span><span class="Punctuation">)</span></pre></p></blockquote>
<p>is roughly transformed to</p>
<blockquote><p><pre><span class="Punctuation">(</span><span class="Keyword">let</span> <span class="Identifier">arg0</span> <span class="Operator">=</span> <span class="StringLit">&quot;is&quot;</span><span class="Punctuation">;</span>
 <span class="Keyword">let</span> <span class="Identifier">arg1</span> <span class="Operator">=</span> <span class="DecNumber">1</span><span class="Punctuation">;</span>
 <span class="Keyword">var</span> <span class="Identifier">ret</span> <span class="Operator">=</span> <span class="Identifier">newString</span><span class="Punctuation">(</span><span class="DecNumber">0</span><span class="Punctuation">)</span><span class="Punctuation">;</span>
 <span class="Identifier">addformat</span><span class="Punctuation">(</span><span class="Identifier">ret</span><span class="Punctuation">,</span> <span class="StringLit">&quot;This &quot;</span><span class="Punctuation">)</span><span class="Punctuation">;</span>
 <span class="Identifier">addformat</span><span class="Punctuation">(</span><span class="Identifier">ret</span><span class="Punctuation">,</span> <span class="Identifier">arg0</span><span class="Punctuation">,</span> <span class="Identifier">DefaultFmt</span><span class="Punctuation">)</span><span class="Punctuation">;</span>
 <span class="Identifier">addformat</span><span class="Punctuation">(</span><span class="Identifier">ret</span><span class="Punctuation">,</span> <span class="StringLit">&quot; the number &quot;</span><span class="Punctuation">)</span><span class="Punctuation">;</span>
 <span class="Identifier">addformat</span><span class="Punctuation">(</span><span class="Identifier">ret</span><span class="Punctuation">,</span> <span class="Identifier">arg1</span><span class="Punctuation">,</span> <span class="Identifier">TFormat</span><span class="Punctuation">(</span><span class="Operator">...</span><span class="Punctuation">)</span><span class="Punctuation">)</span><span class="Punctuation">;</span>
 <span class="Identifier">addformat</span><span class="Punctuation">(</span><span class="Identifier">ret</span><span class="Punctuation">,</span> <span class="StringLit">&quot; example &quot;</span><span class="Punctuation">)</span><span class="Punctuation">;</span>
 <span class="Identifier">ret</span><span class="Punctuation">)</span></pre></p></blockquote>
<p>(Note that this is a statement-list-expression). The functions <cite>addformat</cite> are defined within <cite>strfmt</cite> and add formatted output to the string <cite>ret</cite>.</p>

<h1><a class="toc-backref" id="writing-formatted-output-to-a-file-writefmt" href="#writing-formatted-output-to-a-file-writefmt_toc">Writing formatted output to a file: <cite>writefmt</cite></a></h1><p>The <cite>writefmt</cite> familiy of macros are convenience helpers to write formatted output to a file. A call</p>
<pre><span class="Identifier">writefmt</span><span class="Punctuation">(</span><span class="Identifier">f</span><span class="Punctuation">,</span> <span class="Identifier">fmtstr</span><span class="Punctuation">,</span> <span class="Identifier">arg1</span><span class="Punctuation">,</span> <span class="Identifier">arg2</span><span class="Punctuation">,</span> <span class="Operator">...</span><span class="Punctuation">)</span></pre><p>is equivalent to</p>
<pre><span class="Identifier">write</span><span class="Punctuation">(</span><span class="Identifier">f</span><span class="Punctuation">,</span> <span class="Identifier">fmtstr</span><span class="Operator">.</span><span class="Identifier">fmt</span><span class="Punctuation">(</span><span class="Identifier">arg1</span><span class="Punctuation">,</span> <span class="Identifier">arg2</span><span class="Punctuation">,</span> <span class="Operator">...</span><span class="Punctuation">)</span><span class="Punctuation">)</span></pre><p>However, the former avoids the creation of temporary intermediate strings (the variable <cite>ret</cite> in the example above) but writes directly to the output file. The <cite>printfmt</cite> familiy of functions does the same but writes to <cite>stdout</cite>.</p>

<h1><a class="toc-backref" id="adding-new-formatting-functions" href="#adding-new-formatting-functions_toc">Adding new formatting functions</a></h1><p>In order to add a new formatting function for a type <cite>T</cite> one has to define a new function <cite>writeformat(o: var Writer; x: T; fmt: TFormat)</cite>. The following example defines a formatting function for a simple 2D-point data type. The format specification is used for the printing the two coordinate values.</p>
<pre><span class="Keyword">type</span> <span class="Identifier">TPoint</span> <span class="Operator">=</span> <span class="Keyword">tuple</span><span class="Punctuation">[</span><span class="Identifier">x</span><span class="Punctuation">,</span> <span class="Identifier">y</span><span class="Punctuation">:</span> <span class="Identifier">float</span><span class="Punctuation">]</span>

<span class="Keyword">proc</span> <span class="Identifier">writeformat</span><span class="Operator">*</span><span class="Punctuation">(</span><span class="Identifier">o</span><span class="Punctuation">:</span> <span class="Keyword">var</span> <span class="Identifier">Writer</span><span class="Punctuation">;</span> <span class="Identifier">p</span><span class="Punctuation">:</span> <span class="Identifier">TPoint</span><span class="Punctuation">;</span> <span class="Identifier">fmt</span><span class="Punctuation">:</span> <span class="Identifier">TFormat</span><span class="Punctuation">)</span> <span class="Operator">=</span>
  <span class="Identifier">write</span><span class="Punctuation">(</span><span class="Identifier">o</span><span class="Punctuation">,</span> <span class="CharLit">'('</span><span class="Punctuation">)</span>
  <span class="Identifier">writeformat</span><span class="Punctuation">(</span><span class="Identifier">o</span><span class="Punctuation">,</span> <span class="Identifier">p</span><span class="Operator">.</span><span class="Identifier">x</span><span class="Punctuation">,</span> <span class="Identifier">fmt</span><span class="Punctuation">)</span>
  <span class="Identifier">write</span><span class="Punctuation">(</span><span class="Identifier">o</span><span class="Punctuation">,</span> <span class="CharLit">','</span><span class="Punctuation">)</span>
  <span class="Identifier">write</span><span class="Punctuation">(</span><span class="Identifier">o</span><span class="Punctuation">,</span> <span class="CharLit">' '</span><span class="Punctuation">)</span>
  <span class="Identifier">writeformat</span><span class="Punctuation">(</span><span class="Identifier">o</span><span class="Punctuation">,</span> <span class="Identifier">p</span><span class="Operator">.</span><span class="Identifier">y</span><span class="Punctuation">,</span> <span class="Identifier">fmt</span><span class="Punctuation">)</span>
  <span class="Identifier">write</span><span class="Punctuation">(</span><span class="Identifier">o</span><span class="Punctuation">,</span> <span class="CharLit">')'</span><span class="Punctuation">)</span></pre>
<div class="section" id="6">
<h1><a class="toc-backref" href="#56">Imports</a></h1>
<dl class="item">
<a class="reference external" href="macros.html">macros</a>, <a class="reference external" href="parseutils.html">parseutils</a>, <a class="reference external" href="unicode.html">unicode</a>, <a class="reference external" href="math.html">math</a>, <a class="reference external" href="unsigned.html">unsigned</a>, <a class="reference external" href="pegs.html">pegs</a>
</dl></div>
<div class="section" id="7">
<h1><a class="toc-backref" href="#57">Types</a></h1>
<dl class="item">
<dt id="EFormat"><a name="EFormat"></a><pre><span class="Identifier">EFormat</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Keyword">object</span> <span class="Keyword">of</span> <span class="Identifier">EBase</span></pre></dt>
<dd>
Error in the format string.

</dd>
<dt id="Writer"><a name="Writer"></a><pre><span class="Identifier">Writer</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Keyword">generic</span> <span class="Identifier">W</span>
    <span class="Keyword">block</span><span class="Other">:</span> 
        <span class="Keyword">var</span> <span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">W</span>
        <span class="Identifier">write</span><span class="Other">(</span><span class="Identifier">x</span><span class="Other">,</span> <span class="Identifier">char</span><span class="Other">)</span></pre></dt>
<dd>
Writer to output a character <cite>c</cite>.

</dd>
<dt id="TFmtAlign"><a name="TFmtAlign"></a><pre><span class="Identifier">TFmtAlign</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Keyword">enum</span> 
  <span class="Identifier">faDefault</span><span class="Other">,</span>                  <span class="Comment">## default for given format type</span>
  <span class="Identifier">faLeft</span><span class="Other">,</span>                     <span class="Comment">## left aligned</span>
  <span class="Identifier">faRight</span><span class="Other">,</span>                    <span class="Comment">## right aligned</span>
  <span class="Identifier">faCenter</span><span class="Other">,</span>                   <span class="Comment">## centered</span>
  <span class="Identifier">faPadding</span>                   <span class="Comment">## right aligned, fill characters after sign (numbers only)</span></pre></dt>
<dd>
Format alignment

</dd>
<dt id="TFmtSign"><a name="TFmtSign"></a><pre><span class="Identifier">TFmtSign</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Keyword">enum</span> 
  <span class="Identifier">fsMinus</span><span class="Other">,</span>                    <span class="Comment">## only unary minus, no reservered sign space for positive numbers</span>
  <span class="Identifier">fsPlus</span><span class="Other">,</span>                     <span class="Comment">## unary minus and unary plus</span>
  <span class="Identifier">fsSpace</span>                     <span class="Comment">## unary minus and reserved space for positive numbers</span></pre></dt>
<dd>
Format sign

</dd>
<dt id="TFmtType"><a name="TFmtType"></a><pre><span class="Identifier">TFmtType</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Keyword">enum</span> 
  <span class="Identifier">ftDefault</span><span class="Other">,</span>                  <span class="Comment">## default format for given parameter type</span>
  <span class="Identifier">ftStr</span><span class="Other">,</span>                      <span class="Comment">## string</span>
  <span class="Identifier">ftChar</span><span class="Other">,</span>                     <span class="Comment">## character</span>
  <span class="Identifier">ftDec</span><span class="Other">,</span>                      <span class="Comment">## decimal integer</span>
  <span class="Identifier">ftBin</span><span class="Other">,</span>                      <span class="Comment">## binary integer</span>
  <span class="Identifier">ftOct</span><span class="Other">,</span>                      <span class="Comment">## octal integer</span>
  <span class="Identifier">ftHex</span><span class="Other">,</span>                      <span class="Comment">## hexadecimal integer</span>
  <span class="Identifier">ftFix</span><span class="Other">,</span>                      <span class="Comment">## real number in fixed point notation</span>
  <span class="Identifier">ftSci</span><span class="Other">,</span>                      <span class="Comment">## real number in scientific notation</span>
  <span class="Identifier">ftGen</span><span class="Other">,</span>                      <span class="Comment">## real number in generic form (either fixed point or scientific)</span>
  <span class="Identifier">ftPercent</span>                   <span class="Comment">## real number multiplied by 100 and % added</span></pre></dt>
<dd>
Format type

</dd>
<dt id="TFormat"><a name="TFormat"></a><pre><span class="Identifier">TFormat</span><span class="Operator">*</span> <span class="Other">=</span> <span class="Keyword">tuple</span><span class="Other">[</span><span class="Identifier">typ</span><span class="Other">:</span> <span class="Identifier">TFmtType</span><span class="Other">,</span> <span class="Comment">## format type</span>
                 <span class="Identifier">precision</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">,</span> <span class="Comment">## floating point precision</span>
                 <span class="Identifier">width</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">,</span>  <span class="Comment">## minimal width</span>
                 <span class="Identifier">fill</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">,</span> <span class="Comment">## the fill character, UTF8</span>
                 <span class="Identifier">align</span><span class="Other">:</span> <span class="Identifier">TFmtAlign</span><span class="Other">,</span> <span class="Comment">## aligment</span>
                 <span class="Identifier">sign</span><span class="Other">:</span> <span class="Identifier">TFmtSign</span><span class="Other">,</span> <span class="Comment">## sign notation</span>
                 <span class="Identifier">baseprefix</span><span class="Other">:</span> <span class="Identifier">bool</span><span class="Other">,</span> <span class="Comment">## whether binary, octal, hex should be prefixed by 0b, 0x, 0o</span>
                 <span class="Identifier">upcase</span><span class="Other">:</span> <span class="Identifier">bool</span><span class="Other">,</span> <span class="Comment">## upper case letters in hex or exponential formats</span>
                 <span class="Identifier">comma</span><span class="Other">:</span> <span class="Identifier">bool</span><span class="Other">,</span> <span class="Comment">##</span>
                 <span class="Identifier">arysep</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">]</span></pre></dt>
<dd>
Formatting information.

</dd>

</dl></div>
<div class="section" id="10">
<h1><a class="toc-backref" href="#60">Consts</a></h1>
<dl class="item">
<dt id="DefaultFmt"><a name="DefaultFmt"></a><pre><span class="Identifier">DefaultFmt</span><span class="Operator">*</span><span class="Other">:</span> <span class="Identifier">TFormat</span> <span class="Other">=</span> <span class="Other">(</span><span class="Identifier">ftDefault</span><span class="Other">,</span> <span class="Operator">-</span> <span class="DecNumber">1</span><span class="Other">,</span> <span class="Operator">-</span> <span class="DecNumber">1</span><span class="Other">,</span> <span class="Keyword">nil</span><span class="Other">,</span> <span class="Identifier">faDefault</span><span class="Other">,</span> <span class="Identifier">fsMinus</span><span class="Other">,</span> <span class="Identifier">false</span><span class="Other">,</span> 
                        <span class="Identifier">false</span><span class="Other">,</span> <span class="Identifier">false</span><span class="Other">,</span> <span class="Keyword">nil</span><span class="Other">)</span></pre></dt>
<dd>
<dl class="docutils"><dt>Default format corresponding to the empty format string, i.e.</dt>
<dd><cite>x.format(&quot;&quot;) == x.format(DefaultFmt)</cite>.</dd>
</dl>


</dd>

</dl></div>
<div class="section" id="12">
<h1><a class="toc-backref" href="#62">Procs</a></h1>
<dl class="item">
<dt id="write"><a name="write,string,char"></a><pre><span class="Keyword">proc</span> <span class="Identifier">write</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">c</span><span class="Other">:</span> <span class="Identifier">char</span><span class="Other">)</span></pre></dt>
<dd>


</dd>
<dt id="parse"><a name="parse,string"></a><pre><span class="Keyword">proc</span> <span class="Identifier">parse</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">TFormat</span> <span class="Other">{.</span><span class="Identifier">nosideeffect</span><span class="Other">.}</span></pre></dt>
<dd>


</dd>
<dt id="getalign"><a name="getalign,TFormat,TFmtAlign,int"></a><pre><span class="Keyword">proc</span> <span class="Identifier">getalign</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">TFormat</span><span class="Other">;</span> <span class="Identifier">defalign</span><span class="Other">:</span> <span class="Identifier">TFmtAlign</span><span class="Other">;</span> <span class="Identifier">slen</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">)</span><span class="Other">:</span> <span class="Keyword">tuple</span><span class="Other">[</span>
    <span class="Identifier">left</span><span class="Other">,</span> <span class="Identifier">right</span><span class="Other">:</span> <span class="Identifier">int</span><span class="Other">]</span> <span class="Other">{.</span><span class="Identifier">nosideeffect</span><span class="Other">.}</span></pre></dt>
<dd>
Returns the number of left and right padding characters for a given format alignment and width of the object to be printed.<dl class="docutils"><dt><cite>fmt</cite></dt>
<dd>the format data</dd>
<dt><cite>default</cite></dt>
<dd>if <cite>fmt.align == faDefault</cite>, then this alignment is used</dd>
<dt><cite>slen</cite></dt>
<dd>the width of the object to be printed.</dd>
</dl>
<p>The returned values <cite>(left, right)</cite> will be as minimal as possible so that <cite>left + slen + right &gt;= fmt.width</cite>.</p>


</dd>
<dt id="writeformat"><a name="writeformat,Writer,string,TFormat"></a><pre><span class="Keyword">proc</span> <span class="Identifier">writeformat</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">o</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">Writer</span><span class="Other">;</span> <span class="Identifier">s</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">TFormat</span><span class="Other">)</span></pre></dt>
<dd>
Write string <cite>s</cite> according to format <cite>fmt</cite> using output object <cite>o</cite> and output function <cite>add</cite>.

</dd>
<dt id="writeformat"><a name="writeformat,Writer,char,TFormat"></a><pre><span class="Keyword">proc</span> <span class="Identifier">writeformat</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">o</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">Writer</span><span class="Other">;</span> <span class="Identifier">c</span><span class="Other">:</span> <span class="Identifier">char</span><span class="Other">;</span> <span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">TFormat</span><span class="Other">)</span></pre></dt>
<dd>
Write character <cite>c</cite> according to format <cite>fmt</cite> using output object <cite>o</cite> and output function <cite>add</cite>.

</dd>
<dt id="writeformat"><a name="writeformat,Writer,TRune,TFormat"></a><pre><span class="Keyword">proc</span> <span class="Identifier">writeformat</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">o</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">Writer</span><span class="Other">;</span> <span class="Identifier">c</span><span class="Other">:</span> <span class="Identifier">TRune</span><span class="Other">;</span> <span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">TFormat</span><span class="Other">)</span></pre></dt>
<dd>
Write rune <cite>c</cite> according to format <cite>fmt</cite> using output object <cite>o</cite> and output function <cite>add</cite>.

</dd>
<dt id="writeformat"><a name="writeformat,Writer,TInteger,TFormat"></a><pre><span class="Keyword">proc</span> <span class="Identifier">writeformat</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">o</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">Writer</span><span class="Other">;</span> <span class="Identifier">i</span><span class="Other">:</span> <span class="Identifier">TInteger</span><span class="Other">;</span> <span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">TFormat</span><span class="Other">)</span></pre></dt>
<dd>
Write integer <cite>i</cite> according to format <cite>fmt</cite> using output object <cite>o</cite> and output function <cite>add</cite>.

</dd>
<dt id="writeformat"><a name="writeformat,Writer,pointer,TFormat"></a><pre><span class="Keyword">proc</span> <span class="Identifier">writeformat</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">o</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">Writer</span><span class="Other">;</span> <span class="Identifier">p</span><span class="Other">:</span> <span class="Identifier">pointer</span><span class="Other">;</span> <span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">TFormat</span><span class="Other">)</span></pre></dt>
<dd>
<p>Write pointer <cite>i</cite> according to format <cite>fmt</cite> using output object <cite>o</cite> and output function <cite>add</cite>.</p>
<p>Pointers are casted to unsigned int and formated as hexadecimal with prefix unless specified otherwise.</p>


</dd>
<dt id="writeformat"><a name="writeformat,Writer,TReal,TFormat"></a><pre><span class="Keyword">proc</span> <span class="Identifier">writeformat</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">o</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">Writer</span><span class="Other">;</span> <span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">TReal</span><span class="Other">;</span> <span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">TFormat</span><span class="Other">)</span></pre></dt>
<dd>
Write real number <cite>x</cite> according to format <cite>fmt</cite> using output object <cite>o</cite> and output function <cite>add</cite>.

</dd>
<dt id="writeformat"><a name="writeformat,Writer,openarray[any],TFormat"></a><pre><span class="Keyword">proc</span> <span class="Identifier">writeformat</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">o</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">Writer</span><span class="Other">;</span> <span class="Identifier">ary</span><span class="Other">:</span> <span class="Identifier">openarray</span><span class="Other">[</span><span class="Identifier">any</span><span class="Other">]</span><span class="Other">;</span> <span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">TFormat</span><span class="Other">)</span></pre></dt>
<dd>
Write array <cite>ary</cite> according to format <cite>fmt</cite> using output object <cite>o</cite> and output function <cite>add</cite>.

</dd>
<dt id="addformat"><a name="addformat,Writer,,TFormat"></a><pre><span class="Keyword">proc</span> <span class="Identifier">addformat</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">o</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">Writer</span><span class="Other">;</span> <span class="Identifier">x</span><span class="Other">;</span> <span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">TFormat</span> <span class="Other">=</span> <span class="Identifier">DefaultFmt</span><span class="Other">)</span> <span class="Other">{.</span><span class="Identifier">inline</span><span class="Other">.}</span></pre></dt>
<dd>
Write <cite>x</cite> formatted with <cite>fmt</cite> to <cite>o</cite>.

</dd>
<dt id="addformat"><a name="addformat,Writer,,string"></a><pre><span class="Keyword">proc</span> <span class="Identifier">addformat</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">o</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">Writer</span><span class="Other">;</span> <span class="Identifier">x</span><span class="Other">;</span> <span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> <span class="Other">{.</span><span class="Identifier">inline</span><span class="Other">.}</span></pre></dt>
<dd>
The same as <cite>addformat(o, x, parse(fmt))</cite>.

</dd>
<dt id="addformat"><a name="addformat,string,string"></a><pre><span class="Keyword">proc</span> <span class="Identifier">addformat</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">s</span><span class="Other">:</span> <span class="Keyword">var</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> <span class="Other">{.</span><span class="Identifier">inline</span><span class="Other">.}</span></pre></dt>
<dd>
Write <cite>x</cite> to <cite>s</cite>. This is a fast specialized version for appending unformatted strings.

</dd>
<dt id="addformat"><a name="addformat,TFile,string"></a><pre><span class="Keyword">proc</span> <span class="Identifier">addformat</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">TFile</span><span class="Other">;</span> <span class="Identifier">x</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> <span class="Other">{.</span><span class="Identifier">inline</span><span class="Other">.}</span></pre></dt>
<dd>
Write <cite>x</cite> to <cite>f</cite>. This is a fast specialized version for writing unformatted strings to a file.

</dd>
<dt id="addformat"><a name="addformat,TFile,,TFormat"></a><pre><span class="Keyword">proc</span> <span class="Identifier">addformat</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">TFile</span><span class="Other">;</span> <span class="Identifier">x</span><span class="Other">;</span> <span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">TFormat</span> <span class="Other">=</span> <span class="Identifier">DefaultFmt</span><span class="Other">)</span> <span class="Other">{.</span><span class="Identifier">inline</span><span class="Other">.}</span></pre></dt>
<dd>
Write <cite>x</cite> to file <cite>f</cite> using format <cite>fmt</cite>.

</dd>
<dt id="addformat"><a name="addformat,TFile,,string"></a><pre><span class="Keyword">proc</span> <span class="Identifier">addformat</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">TFile</span><span class="Other">;</span> <span class="Identifier">x</span><span class="Other">;</span> <span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span> <span class="Other">{.</span><span class="Identifier">inline</span><span class="Other">.}</span></pre></dt>
<dd>
Write <cite>x</cite> to file <cite>f</cite> using format string <cite>fmt</cite>. This is the same as <cite>addformat(f, x, parse(fmt))</cite>

</dd>
<dt id="format"><a name="format,,TFormat"></a><pre><span class="Keyword">proc</span> <span class="Identifier">format</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">x</span><span class="Other">;</span> <span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">TFormat</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span></pre></dt>
<dd>
Return <cite>x</cite> formatted as a string according to format <cite>fmt</cite>.

</dd>
<dt id="format"><a name="format,,string"></a><pre><span class="Keyword">proc</span> <span class="Identifier">format</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">x</span><span class="Other">;</span> <span class="Identifier">fmt</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span></pre></dt>
<dd>
Return <cite>x</cite> formatted as a string according to format string <cite>fmt</cite>.

</dd>
<dt id="format"><a name="format,"></a><pre><span class="Keyword">proc</span> <span class="Identifier">format</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">x</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">string</span> <span class="Other">{.</span><span class="Identifier">inline</span><span class="Other">.}</span></pre></dt>
<dd>
Return <cite>x</cite> formatted as a string according to the default format. The default format corresponds to an empty format string.

</dd>

</dl></div>
<div class="section" id="17">
<h1><a class="toc-backref" href="#67">Macros</a></h1>
<dl class="item">
<dt id="fmt"><a name="fmt.m,,varargs[expr]"></a><pre><span class="Keyword">macro</span> <span class="Identifier">fmt</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">fmtstr</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">{</span><span class="Identifier">lit</span><span class="Other">}</span><span class="Other">;</span> <span class="Identifier">args</span><span class="Other">:</span> <span class="Identifier">varargs</span><span class="Other">[</span><span class="Identifier">expr</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">expr</span></pre></dt>
<dd>
Formats arguments <cite>args</cite> according to the format string <cite>fmtstr</cite>.

</dd>
<dt id="writefmt"><a name="writefmt.m,TFile,string,varargs[expr]"></a><pre><span class="Keyword">macro</span> <span class="Identifier">writefmt</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">TFile</span><span class="Other">;</span> <span class="Identifier">fmtstr</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">args</span><span class="Other">:</span> <span class="Identifier">varargs</span><span class="Other">[</span><span class="Identifier">expr</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">expr</span></pre></dt>
<dd>
The same as <cite>write(f, fmtstr.fmt(args...))</cite> but faster.

</dd>
<dt id="writelnfmt"><a name="writelnfmt.m,TFile,string,varargs[expr]"></a><pre><span class="Keyword">macro</span> <span class="Identifier">writelnfmt</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">f</span><span class="Other">:</span> <span class="Identifier">TFile</span><span class="Other">;</span> <span class="Identifier">fmtstr</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">;</span> <span class="Identifier">args</span><span class="Other">:</span> <span class="Identifier">varargs</span><span class="Other">[</span><span class="Identifier">expr</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">expr</span></pre></dt>
<dd>
The same as <cite>writeln(f, fmtstr.fmt(args...))</cite> but faster.

</dd>
<dt id="printfmt"><a name="printfmt.m,,varargs[expr]"></a><pre><span class="Keyword">macro</span> <span class="Identifier">printfmt</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">fmtstr</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">{</span><span class="Identifier">lit</span><span class="Other">}</span><span class="Other">;</span> <span class="Identifier">args</span><span class="Other">:</span> <span class="Identifier">varargs</span><span class="Other">[</span><span class="Identifier">expr</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">expr</span></pre></dt>
<dd>
The same as <cite>writefmt(stdout, fmtstr, args...)</cite>.

</dd>
<dt id="printlnfmt"><a name="printlnfmt.m,,varargs[expr]"></a><pre><span class="Keyword">macro</span> <span class="Identifier">printlnfmt</span><span class="Operator">*</span><span class="Other">(</span><span class="Identifier">fmtstr</span><span class="Other">:</span> <span class="Identifier">string</span><span class="Other">{</span><span class="Identifier">lit</span><span class="Other">}</span><span class="Other">;</span> <span class="Identifier">args</span><span class="Other">:</span> <span class="Identifier">varargs</span><span class="Other">[</span><span class="Identifier">expr</span><span class="Other">]</span><span class="Other">)</span><span class="Other">:</span> <span class="Identifier">expr</span></pre></dt>
<dd>
The same as <cite>writelnfmt(stdout, fmtstr, args...)</cite>.

</dd>

</dl></div>

</div>

<small>Generated: 2014-05-29 20:46:24 UTC</small>
</div>
</body>
</html>
